using System;

namespace Homework_2
{
	internal class Program
	{
		static void Main(string[] args)
		{
			Console.CursorVisible = false;

			bool isPlaying = true;
			char player = 'O';
			char wall = '#'; 
			int playerY = 3;
			int playerX = 1;
			int playerDirectionX = 0;
			int playerDirectionY = -1;

			char[,] map = DrawMap(wall);

			while (isPlaying)
            {
				Console.SetCursorPosition(playerY, playerX);
				Console.Write(player);

				if (Console.KeyAvailable)
                {
					ConsoleKeyInfo key = Console.ReadKey(true);

					switch (key.Key)
                    {
						case ConsoleKey.W:
							playerDirectionX = -1;
							playerDirectionY = 0;
							break;
						case ConsoleKey.S:
							playerDirectionX = 1;
							playerDirectionY = 0;
							break;
						case ConsoleKey.A:
							playerDirectionX = 0;
							playerDirectionY = -1;
							break;
						case ConsoleKey.D:
							playerDirectionX = -1;
							playerDirectionY = 1;
							break;
					}

                    if (map[playerX + playerDirectionX, playerY + playerDirectionY] != wall)
                    {
						Console.SetCursorPosition(playerY, playerX);
						Console.Write(" ");

						playerX += playerDirectionX;
						playerY += playerDirectionY;

						Console.SetCursorPosition(playerY, playerX);
						Console.Write(player);
                    }
                }
				Console.ReadKey(true);
            }
		}

		static char[,] DrawMap(char wall)
		{
			char[,] array = { { wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall },
							  { wall, ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', wall },
							  { wall, ' ', wall, wall, wall, wall, wall, ' ', wall, wall, wall, wall },
							  { wall, ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', wall },
						      { wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall, wall }};

			for (int i = 0; i < array.GetLength(0); i++)
			{
				for (int j = 0; j < array.GetLength(1); j++)
				{
					Console.Write(array[i, j]);
				}

				Console.WriteLine("");
			}

			return array;
		}
	}
}
